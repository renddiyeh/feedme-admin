webpackJsonp([2],{0:function(e,exports,t){"use strict";var o=t(525);(0,o.redirectToLogin)()},524:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var o=exports.API_ROOT="https://api.feed-me.me/";exports.WEEK_DAYS=[{value:0,label:"星期天"},{value:1,label:"星期一"},{value:2,label:"星期二"},{value:3,label:"星期三"},{value:4,label:"星期四"},{value:5,label:"星期五"},{value:6,label:"星期六"}];exports.default=o},525:function(e,exports,t){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateToken=exports.redirectToLogin=void 0,exports.default=function(e){var t=n()||window.localStorage.getItem("feedme_admin_token");t?i(t,e):a()},t(526);var o=t(524),n=function(){var e=location.search.substr(1),t=void 0;return e.split("&").forEach(function(e){var o=e.split("=");return"token"!==o[0]||(t=decodeURIComponent(o[1]),!1)}),t},a=exports.redirectToLogin=function(){window.localStorage.removeItem("feedme_admin_token"),window.location.href="./login.html"},l=function(e,t){document.getElementById("view").style.display="none",fetch(o.API_ROOT+"auth/refresh",{headers:{"x-refresh-token":e}}).then(function(e){return e.json()}).then(function(e){e.token?(window.localStorage.setItem("feedme_admin_token",e.token),window.roles=e.roles,t&&t(e.roles),window.location.reload()):a()})},i=exports.validateToken=function(e,t){fetch(o.API_ROOT+"auth/validate_token",{headers:{Authorization:"Bearer "+e}}).then(function(e){return e.json()}).then(function(o){"success"===o.status?(window.roles=o.roles,t&&t(o.roles)):500===o.status_code?l(e,t):a()}).catch(function(e){console.log("parsing failed",e)})}}});